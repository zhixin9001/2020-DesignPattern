DDD是一种设计架构的思想
意识培养，弱化数据库的作用，只将数据库作为数据仓库  
需求分析->【领域建模(业务建模)】->数据建模、代码建模

领域
子域，根据自身重要性和功能属性分三类
    核心域，决定产品和公司核心竞争力的子域
    通用域，同时被其他多个子域使用
    支撑域，功能子域，不包含决定产品核心竞争力的功能，不包含属于通用的功能
    
    通用域：通用系统、认证、权限、日志，与业务无关，服务整个业务领域
    支撑域：具有企业特性，不具有通用性，业务系统中某些重要但非核心业务
    核心域：不同场景、不同业务角度，结论不同
        桃树：公园-花，农场-果实，林场-茎
        
一个领域只有一个核心，各个子域都又有各自的子核心


限界上下文和通用语言，战略设计范畴
    通用语言，定义上下文的含义，通过团队交流达成共识的、能够简单、清晰、准确描述业务含义和规则的语言
        避免交流障碍，确保理解一致
    限界上下文，定义领域边界
        
    商品
        销售阶段；商品，关注价格、数量
        运输阶段：货物，关注重量、体积等
        

实体和值对象
    实体
        这里的实体与ORM中的实体不完全等同
        在DDD中，实体是唯一的且可以持续变化的，
        业务角度：是多个属性、操作、行为的载体
        代码角度：实体类 包含属性、方法，一般用充血模型
        运行角度：领域对象，具有唯一ID    数据库角度：领域模型映射到数据模型，一般是一对一，但还有的是运行态实体，所以可能是一对多、多对一，对0等情况
    值对象
        本质是集合
        包含一系列描述实体的属性，依附于实体，离开实体没有意义
        对属性进行归类，shippinginfo归类
        可看作：值+对象
            值：特点就是不变，变了就是另外的值
            用对象的方式来表述某个值
        值对象不可以修改
        在数据库中，值对象与实体采用非范式，避免关联表、增加数据库涉及复杂性
        值对象的两种形态：
                1.作为实体类的单一的属性 Person.Address
                2.序列化签入方式
        值对象优势：
            对属性进行归类和这里
            简化数据库的设计（值对象签入到实体，较少表的数量）
        值对象是一把双刃剑：
            嵌入方式，查询时性能不好
        值对象与实体的关系
            值对象只是逻辑上独立出来，仍然和实体是一体的
            实体的核心是唯一性、延续性
            值对象核心是描述
            
聚合、聚合根
    聚合
        强关联关系，整体、部分关系，比如汽车、轮胎        
        将相关联的领域对象进行显式的分组，表达整体-部分的概念
        业务和逻辑紧密关联的实体和值对象组合而成
        一个聚合对应一个数据仓储
        高内聚、低耦合
        在DDD分层架构中，聚合在领域层，包含了多个聚合
        聚合内的实体都是由充血模型实现的
    聚合根
        聚合的管理者
        对外负责人
        负责协调实体间的协作
        
        聚合根具有全局的唯一标识，订单ID
        实体，在聚合内部才有唯一本地标识，订单明细ID
        
        独立的聚合根意味着独立的上下文边界，独立的业务场景
        生命周期，订单+订单明细

DDD分层架构
    严格，只能与下一层打交道
    松散，低层即可，不限制下一层
    
    坚持层与层间的松散
    好处
        开发人员可以只关注整个结构中的某一层
        方便替换原有层次的实现
    缺点
        性能较差
        多层修改
    
    微服务架构中，边界非常重要
    
    几种DDD分层架构，倒数第二课，42分钟
        四层结构
            用户接口层，UI，Web API
            应用层，编排、组合
            领域层，聚合根、聚合，领域服务
            基础层，仓储就在这里
        洋葱架构（整洁架构）            
        六边形解构(端口适配器架构)
        
        这些架构都有相同的核心：领域模型
        
    ABP 
    ABP VNext
   
代码框架，DDD雏形
    Application
    Domain
    Domain.Core
    Infrastructure
    Interfaces.WebApi

各层功能
    Application
        应用层，外部服务，向上为用户接口层提供数据，向下整合内部服务
        应用服务、事件相关的代码
    Domain
        领域服务，内部服务
        聚合、聚合内实体、方法、领域服务、事件代码
    Domain.Core
        领域层的核心类库，共用的代码、接口等，与Domain为同一层，方便代码管理而分开
    Infrastructure
        基础设施层，数据库、缓存、文件服务
    Interfaces.WebApi
        用户接口层
        
如何展开DDD使用
    事件风暴，整理各个领域对象，业务行为都找出来，以领域专家为核心，类似需求调研
        输出，领域模型、聚合、领域对象等
    设计实体
    
    凡是跨聚合，使用事件
    内部使用事件，外部MQ
    
DDD最重要的是建模，建模好，编码会很丝滑